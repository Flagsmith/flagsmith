---
title: Flagsmith Android/Kotlin SDK
sidebar_label: Android / Kotlin
description: Manage your Feature Flags and Remote Config in your Android applications.
slug: /clients/android
---

import CodeBlock from '@theme/CodeBlock';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import { AndroidVersion } from '@site/src/components/SdkVersions.js';

This SDK can be used for Android applications written in Kotlin. The source code for the client is available on
[GitHub](https://github.com/Flagsmith/flagsmith-kotlin-android-client/).

## Installation

### Gradle

The Flagsmith Android SDK is available from [Maven Central](https://mvnrepository.com/artifact/com.flagsmith/flagsmith-kotlin-android-client).

<Tabs>
<TabItem value="kotlin" label="Kotlin">

<CodeBlock title="app/build.gradle.kts">
{`repositories {
    google()
    mavenCentral()
}

dependencies {
    implementation("com.flagsmith:flagsmith-kotlin-android-client:${AndroidVersion({})}")
}`}
</CodeBlock>

</TabItem>

<TabItem value="groovy" label="Groovy">

<CodeBlock title="app/build.gradle">
{`repositories {
    google()
    mavenCentral()
}

dependencies {
    implementation 'com.flagsmith:flagsmith-kotlin-android-client:${AndroidVersion({})}'
}`}
</CodeBlock>

</TabItem>
</Tabs>

## Initialisation

Initialise the Flagsmith client in your Activity's `onCreate` method:

```kotlin
lateinit var flagsmith : Flagsmith

override fun onCreate(savedInstanceState: Bundle?) {
    flagsmith = Flagsmith(environmentKey = "your_client_side_environment_key", context = context)
}
```

## Custom configuration

The Flagsmith SDK has various parameters for initialisation. Most of these are optional, and allow you to configure the
Flagsmith SDK to your specific needs:

- `environmentKey` The client-side SDK key for your current Flagsmith environment.
- `baseUrl` If not using Flagsmith SaaS, set this to your Flagsmith API URL. For example `"https://flagsmith.example.com/api/v1/"`
- `context` The current Context is required to use the Flagsmith Analytics functionality
- `enableAnalytics` Enable analytics - default true. Disable this if you'd like to avoid the use of Context
- `analyticsFlushPeriod` The period in seconds between attempts by the Flagsmith SDK to push analytic events to the
  server
- `enableRealtimeUpdates` Enable the SDK to receive updates to features in real time while the app is running
- `defaultFlags` Provide default flags to the SDK to ensure values are available when no network connection can be made
- `cacheConfig` Disabled by default, but when enabled will allow Flagsmith to fall back to cached values when no network
  connection can be made
- `request / read / writeTimeoutSeconds` Fine-grained control of the HTTP timeouts used inside the Flagsmith SDK

## Flags

Now you are all set to retrieve feature flags from your project. To list and print all flags:

```kotlin
flagsmith.getFeatureFlags { result ->
    result.fold(
        onSuccess = { flagList ->
            Log.i("Flagsmith", "Current flags:")
            flagList.forEach { Log.i("Flagsmith", "- ${it.feature.name} - enabled: ${it.enabled} value: ${it.featureStateValue ?: "not set"}") }
        },
        onFailure = { err ->
            Log.e("Flagsmith", "Error getting feature flags", err)
        })
}
```

### Get Flags for an identity

To get feature flags for a specific identity:

```kotlin
flagsmith.getFeatureFlags(identity = "test-user@gmail.com") { result ->
    result.fold(
        onSuccess = { flagList ->
            Log.i("Flagsmith", "Current flags:")
            flagList.forEach { Log.i("Flagsmith", "- ${it.feature.name} - enabled: ${it.enabled} value: ${it.featureStateValue ?: "not set"}") }
        },
        onFailure = { err ->
            Log.e("Flagsmith", "Error getting feature flags", err)
        })
}
```

You can also get flags for an identity and set the traits at the same time:

```kotlin
flagsmith.getFeatureFlags(identity = "test-user@gmail.com", traits = listOf(Trait(key = "set-from-client", value = "12345"))) { result ->
    result.fold(
        onSuccess = { flagList ->
            Log.i("Flagsmith", "Current flags:")
            flagList.forEach { Log.i("Flagsmith", "- ${it.feature.name} - enabled: ${it.enabled} value: ${it.featureStateValue ?: "not set"}") }
        },
        onFailure = { err ->
            Log.e("Flagsmith", "Error getting feature flags", err)
        })
}
```

### Get Flag Object by `featureId`

To retrieve a feature flag boolean value by its name:

```kotlin
flagsmith.hasFeatureFlag(forFeatureId = "test_feature1") { result ->
    val isEnabled = result.getOrDefault(true)
    Log.i("Flagsmith", "test_feature1 is enabled? $isEnabled")
}
```

### Create a Trait for a user identity

```kotlin
flagsmith.setTrait(Trait(key = "set-from-client", value = "12345"), identity = "test@test.com") { result ->
    result.fold(
        onSuccess = { _ ->
            Log.i("Flagsmith", "Successfully set trait")

        },
        onFailure = { err ->
            Log.e("Flagsmith", "Error setting trait", err)
        })
}
```

### Get all Traits

To retrieve a trait for a particular identity as explained here
[Traits](../../basic-features/managing-identities.md#identity-traits)

```kotlin
flagsmith.getTraits(identity = "test@test.com") { result ->
    result.fold(
        onSuccess = { traits ->
            traits.forEach {
                Log.i("Flagsmith", "Trait - ${it.key} : ${it.traitValue}")
            }
        },
        onFailure = { err ->
            Log.e("Flagsmith", "Error getting traits", err)
        })
}
```

### Providing Default Flags

You can define default flag values when initialising the SDK. This ensures that your application works as intended in
the event that it cannot receive a response from our API.

```kotlin
val defaultFlags = listOf(
    Flag(
        feature = Feature(
            name = "Flag 1",
        ),
        enabled = true,
        featureStateValue = "value1",
    ),
    Flag(
        feature = Feature(
            name = "Flag 2",
        ),
        enabled = true,
        featureStateValue = "value2",
    ),
)

flagsmith = Flagsmith(
    environmentKey = "your_client_side_environment_key",
    defaultFlags = defaultFlags,
    context = context,
)
```

### Cache

By default, the cache is off. When turned on, Flagsmith will cache all flags returned by the API (to permanent storage),
and in case of a failed response, fall back on the cached values. The cache can be turned off or on during
initialisation:

```kotlin
flagsmith = Flagsmith(
    environmentKey = FlagsmithConfigHelper  environmentDevelopmentKey,
    cacheConfig = FlagsmithCacheConfig(enableCache = true),
    context = context,
)
```

You can also set a TTL for the cache (in seconds) for finer control:

```kotlin
FlagsmithCacheConfig (
    enableCache = true,
    cacheTTLSeconds = 3600L, // 1 hour
    val cacheSize = 1024L * 1024L, // 1 MB
)
```

## Override the default base URL

By default, the client uses a default configuration. You can override the configuration as follows. If you're also using
realtime flag updates in your hosted environment you'll also need to pass the eventSourceUrl in a similar fashion:

```kotlin
flagsmith = Flagsmith(
    environmentKey = "your_client_side_environment_key",
    context = context,
    baseUrl = "https://flagsmith.example.com/api/v1/",
    eventSourceUrl = "https://realtime.flagsmith.example.com/",
)
```
